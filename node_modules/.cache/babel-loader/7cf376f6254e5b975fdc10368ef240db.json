{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aisha\\\\Desktop\\\\React-Infinite-Scroll-and-Lazy-Loading\\\\src\\\\App.js\";\nimport React, { useReducer, useRef } from 'react';\nimport { useFetch, useInfiniteScroll, useLazyLoading } from './customHooks';\nimport './index.css';\n\nfunction App() {\n  const imgReducer = (state, action) => {\n    switch (action.type) {\n      case 'STACK_IMAGES':\n        return { ...state,\n          images: state.images.concat(action.images)\n        };\n\n      case 'FETCHING_IMAGES':\n        return { ...state,\n          fetching: action.fetching\n        };\n\n      default:\n        return state;\n    }\n  };\n\n  const pageReducer = (state, action) => {\n    switch (action.type) {\n      case 'ADVANCE_PAGE':\n        return { ...state,\n          page: state.page + 1\n        };\n\n      default:\n        return state;\n    }\n  };\n\n  const [pager, pagerDispatch] = useReducer(pageReducer, {\n    page: 0\n  });\n  const [imgData, imgDispatch] = useReducer(imgReducer, {\n    images: [],\n    fetching: true\n  });\n  let bottomBoundaryRef = useRef(null);\n  useFetch(pager, imgDispatch);\n  useLazyLoading('.card-img-top', imgData.images);\n  useInfiniteScroll(bottomBoundaryRef, pagerDispatch);\n  return React.createElement(\"div\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, React.createElement(\"nav\", {\n    className: \"navbar bg-light\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    className: \"navbar-brand\",\n    href: \"/#\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, \"Infinite scroll + image lazy loading\")))), React.createElement(\"div\", {\n    id: \"images\",\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, imgData.images.map((image, index) => {\n    const {\n      author,\n      download_url\n    } = image;\n    return React.createElement(\"div\", {\n      key: index,\n      className: \"card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-body \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      alt: author,\n      \"data-src\": download_url,\n      className: \"card-img-top\",\n      src: 'https://picsum.photos/id/870/300/300?grayscale&blur=2',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"card-footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"card-text text-center text-capitalize text-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"Shot by: \", author)));\n  }))), imgData.fetching && React.createElement(\"div\", {\n    className: \"text-center bg-secondary m-auto p-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"m-0 text-white\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \"Getting images\")), React.createElement(\"div\", {\n    id: \"page-bottom-boundary\",\n    style: {\n      border: '1px solid red'\n    },\n    ref: bottomBoundaryRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }));\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/aisha/Desktop/React-Infinite-Scroll-and-Lazy-Loading/src/App.js"],"names":["React","useReducer","useRef","useFetch","useInfiniteScroll","useLazyLoading","App","imgReducer","state","action","type","images","concat","fetching","pageReducer","page","pager","pagerDispatch","imgData","imgDispatch","bottomBoundaryRef","map","image","index","author","download_url","border"],"mappings":"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","sourcesContent":["import React, { useReducer, useRef } from 'react';\r\n\r\nimport { useFetch, useInfiniteScroll, useLazyLoading } from './customHooks'\r\nimport './index.css';\r\n\r\nfunction App() {\r\n  const imgReducer = (state, action) => {\r\n    switch (action.type) {\r\n      case 'STACK_IMAGES':\r\n        return { ...state, images: state.images.concat(action.images) }\r\n      case 'FETCHING_IMAGES':\r\n        return { ...state, fetching: action.fetching }\r\n      default:\r\n        return state;\r\n    }\r\n  }\r\n\r\n  const pageReducer = (state, action) => {\r\n    switch (action.type) {\r\n      case 'ADVANCE_PAGE':\r\n        return { ...state, page: state.page + 1 }\r\n      default:\r\n        return state;\r\n    }\r\n  }\r\n\r\n  const [pager, pagerDispatch] = useReducer(pageReducer, { page: 0 })\r\n  const [imgData, imgDispatch] = useReducer(imgReducer, { images: [], fetching: true, })\r\n\r\n  let bottomBoundaryRef = useRef(null);\r\n  useFetch(pager, imgDispatch);\r\n  useLazyLoading('.card-img-top', imgData.images)\r\n  useInfiniteScroll(bottomBoundaryRef, pagerDispatch);\r\n\r\n  return (\r\n    <div className=\"\">\r\n      <nav className=\"navbar bg-light\">\r\n        <div className=\"container\">\r\n          <a className=\"navbar-brand\" href=\"/#\">\r\n            <h2>Infinite scroll + image lazy loading</h2>\r\n          </a>\r\n        </div>\r\n      </nav>\r\n\r\n      <div id='images' className=\"container\">\r\n        <div className=\"row\">\r\n          {imgData.images.map((image, index) => {\r\n            const { author, download_url } = image\r\n            return (\r\n              <div key={index} className=\"card\">\r\n                <div className=\"card-body \">\r\n                  <img\r\n                    alt={author}\r\n                    data-src={download_url}\r\n                    className=\"card-img-top\"\r\n                    src={'https://picsum.photos/id/870/300/300?grayscale&blur=2'}\r\n                  />\r\n                </div>\r\n                <div className=\"card-footer\">\r\n                  <p className=\"card-text text-center text-capitalize text-primary\">Shot by: {author}</p>\r\n                </div>\r\n              </div>\r\n            )\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      {imgData.fetching && (\r\n        <div className=\"text-center bg-secondary m-auto p-3\">\r\n          <p className=\"m-0 text-white\">Getting images</p>\r\n        </div>\r\n      )}\r\n      <div id='page-bottom-boundary' style={{ border: '1px solid red' }} ref={bottomBoundaryRef}></div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}